## TIL
기존 블로그를 통해 TIL를 작성해 왔던 글을 git으로 옮기고 처음 작성하는 글 입니다.

이번주 처음으로 백엔드와 프론트엔드와 함께 프로젝트를 했고 프로젝트를 하며 느낀 회고입니다. 기존 하나의 서버에서 뷰를 만들고 서버를 만들고 api를 통신하고 실행하던 모든 것들이 백엔드 서버와 프론트엔드 서버를 나누게 되면서
환경설정부터 개발까지 알아야 하고 신경써야 할 것들이 생겼습니다.

1. api설계의 중요
api설계는 백엔드와 프론트엔드의 약속이라 생각합니다. 기존 하나의 서버에서 개발을 할때에는 처음 api설계의 중요보다는 그때그때 필요할 때 추가하자는 마음으로 개발에만 집중을 하였습니다. 
하지만 백엔드와 프론트엔드로 나뉘며 서로간의 약속이 필요하다고 인지했고, 처음 개발를 하기 전 api설계에 최대한 집중하였습니다. 이로 인해 개발하면서 프론트엔드와 협업이 잘되었고
무사히 프로젝트를 완성할 수 있었습니다.

2. 소셜 로그인
카카오 로그인을 구현을 통해 정말 많은 생각을 했습니다. 그리고 왜 카카오 api사이트에서 통신흐름표를 제공하고 이 흐름표를 통해 개발자들이 무엇을 보고 인지 해야 하는지도 알게되었습니다.
기존 공부를 하면서 카카오에서 제공하는 uri https://kauth.kakao.com/oauth/authorize?client_id={REST_API_KEY}&redirect_uri={REDIRECT_URI}&response_type=code 만 단순히 프론트엔드에서 
REST_API_KEY와 REDIRECT_URI만 카카오 api 키와 백에드 서버 uri만 넣으면 될줄 알았습니다. 하지만 아니었습니다. 2시간정도를 프론트엔드와 다양한 시도를 했습니다. 카카오 속 REDIRECT_URI를
바꾸기도 하고, 백엔드 서버의 REDIRECT_URI를 바꾸고 프론트엔드에서 잘못된 정보를 던지는지 같이 프론트엔드와 살펴보기도 했습니다. 하지만 모두 오류가 발생했습니다. 
원인은 api흐름도를 보면 알수 있었습니다. 카카오에 처음 인증코드를 요청을 합니다. 이때 카카오는 인증코드를 응답합니다. 여기서 인증코드가 오는 uri가 중요했습니다.
REDIRECT_URI?code={인증코드} 입니다. REDIRECT_URI를 프론트엔드 서버로 변경하고, 인증코드를 받은 프론트엔드 서버는 백엔드 서버의 카카오 로그인 uri로 인증코드와 함께 요청을 해야 했습니다.
흐름만 알면 몇번의 시도를 통해 금방 해결할 수 있는 문제였습니다.
외부 api를 사용할 때는 해당 사이트에서 제공하는 정보는 모두 의미 있고 꼭 한번은 확인해봐야하는 정보라는 것을 인지하는 시간이었습니다.

3. jwt사용의 아쉬움
로그인을 하는 과정에서는 쿠키와 세션, jwt등을 사용할 수 있습니다. 하지만 쿠키는 보안의 문제와 세션은 서버 동기화의 문제가 있기에 최근 많이 사용하는 jwt를 개발하였습니다.
처음 jwt를 개발했을 때는 토큰만 생성하고 http body를 통해 전송하면 될 줄 알았지만 토큰에는 accessToken과 refleshToken이 있고, 이 두 토큰을 이용하여 사용자의 로근인 유효시간을 검증한다는
것을 알았습니다. 하지만 이런 정보를 알게된 시간이 프로젝트 마무리 이틀전 이었고, refleshToken의 부재로 프로젝트를 마무리하게 되었습니다. 

이번 프로젝트를 통해 협업의 중요성과 평소 하던 공부의 방향을 다시 생각해보는 계기가 되었다.
다음주에 하는 프로젝트에서는 이번 프로젝트에서의 아쉬움들을 해결하고, 더욱 발전된 방향으로 개발 하도록 실천해야 겠습니다.
